name: devenv
on: [workflow_dispatch]
  # push:
  #   branches:
  #     - dev
  # workflow_dispatch:

env:
  BRANCH: ${{ github.head_ref || github.ref_name }}
  IMAGE: idelchi/devenv

jobs:
  # info:
  #   runs-on: ubuntu-22.04
  #   steps:
  #     - run: |
  #         echo "triggered by a ${{ github.event_name }} event."
  #         echo "running on a ${{ runner.os }}."
  #         echo "name of branch is ${{ github.ref }} and repository is ${{ github.repository }}."
  #         echo "${{ github.repository }} repository has been cloned to the runner."
  #         echo "workflow is now ready to test your code on the runner."
  #         echo "running as $(whoami)"

  validate:
    runs-on: ubuntu-22.04
    # needs: [info]
    # env:
    #   PWD: .
    steps:
      # - uses: actions/checkout@v3
      - run: ls

      # - run: echo "running as $(whoami)"

      # - run: docker-compose build devenv
      # - run: docker compose run --rm devenv go mod init example.com
      # - run: docker compose run --rm devenv task lint:all

  # docker:
  #   runs-on: [self-hosted, docker]
  #   needs: [validate]
  #   if: github.ref == 'refs/heads/master'
  #   steps:
  #     - uses: actions/checkout@v3

  #     - run: echo "running as $(whoami)"

  #     - run: echo "Building image $IMAGE:latest"
  #     - name: Build image
  #       run: docker build --tag $IMAGE:latest .

  #     - name: Login to Docker Hub
  #       uses: docker/login-action@v2
  #       with:
  #         username: ${{ secrets.DOCKER_USERNAME }}
  #         password: ${{ secrets.DOCKER_PASSWORD }}

  #     - name: Push image
  #       run: docker push $IMAGE:latest
# https://docs.github.com/en/actions/learn-github-actions/contexts#vars-context
# https://docs.github.com/en/actions/learn-github-actions/variables
